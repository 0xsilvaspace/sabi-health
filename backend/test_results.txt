üîß Sabi Health API Test Suite
==============================
[0;34m‚ÑπÔ∏è Checking server health...[0m
[0;32m‚úÖ Server is up[0m
[0;34m‚ÑπÔ∏è Registering a test user (LGA: Lagos, phone: +2348012345678)...[0m
{"name":"Test User","phone":2348012345678,"lga":"Lagos","id":"9aaca3b7-5a11-4e22-9b87-3328480ee4f1"}
[0;32m‚úÖ User registered with ID: 9aaca3b7-5a11-4e22-9b87-3328480ee4f1[0m
[0;34m‚ÑπÔ∏è Listing all registered users...[0m
[{"name":"Test User","phone":2348012345678,"lga":"Lagos","id":"9aaca3b7-5a11-4e22-9b87-3328480ee4f1"}]
[0;32m‚úÖ Users listed[0m
[0;34m‚ÑπÔ∏è Checking risk for user 9aaca3b7-5a11-4e22-9b87-3328480ee4f1...[0m
{"user_id":"9aaca3b7-5a11-4e22-9b87-3328480ee4f1","risk":"HIGH","rainfall_mm":7.800000000000001}
[0;32m‚úÖ Risk checked[0m
[0;34m‚ÑπÔ∏è Generating health message for user 9aaca3b7-5a11-4e22-9b87-3328480ee4f1...[0m
{"user_id":"9aaca3b7-5a11-4e22-9b87-3328480ee4f1","script":"Nne/Nna, Sabi Health dey call you for Lagos. Risk don high for there. Abeg stay safe!","audio_url":"https://example.com/audio.mp3"}
[0;32m‚úÖ AI Health message generated[0m
[0;34m‚ÑπÔ∏è Testing /test-rainfall for Lagos...[0m
{"lga":"Lagos","rainfall_mm":7.800000000000001}
[0;32m‚úÖ Rainfall test done[0m
[0;34m‚ÑπÔ∏è Testing /test-coordinates for Lagos...[0m
{"lga":"Lagos","coordinates":[6.5244,3.3792]}
[0;32m‚úÖ Coordinates test done[0m
[0;34m‚ÑπÔ∏è Testing /test-hotspot for Kano (should be hotspot)...[0m
{"lga":"Kano","is_hotspot":true,"details":{"disease":"Lassa fever","risk":"HIGH","source":"NCDC Situation Report Week 7 2026"}}
[0;32m‚úÖ Hotspot test done[0m
[0;34m‚ÑπÔ∏è Testing /test-risk for Kano...[0m
{"lga":"Kano","coordinates":[12.0022,8.592],"rainfall_mm":0.0,"is_hotspot":true,"risk":"HIGH"}
[0;32m‚úÖ Risk test done[0m
[0;34m‚ÑπÔ∏è Triggering a call for user 9aaca3b7-5a11-4e22-9b87-3328480ee4f1...[0m
{"status":"call_initiated","method":"simulation","risk":"HIGH","rainfall_mm":7.800000000000001,"audio_url":"https://example.com/audio.mp3","script":"Nne/Nna, Sabi Health dey call you for Lagos. Risk don high for there. Abeg stay safe!","call_id":"0f5e0a44-af9c-430b-b91a-c885e963498e"}
[0;32m‚úÖ Call initiated with ID: 0f5e0a44-af9c-430b-b91a-c885e963498e[0m
[0;34m‚ÑπÔ∏è Recording response (fever) for call 0f5e0a44-af9c-430b-b91a-c885e963498e...[0m
"<?xml version=\"1.0\" encoding=\"UTF-8\"?><Response><Say>We didn't receive a valid response. Goodbye.</Say><Hangup /></Response>"
[0;32m‚úÖ Response recorded[0m
[0;34m‚ÑπÔ∏è Fetching call logs...[0m
[{"id":"0f5e0a44-af9c-430b-b91a-c885e963498e","user_id":"9aaca3b7-5a11-4e22-9b87-3328480ee4f1","timestamp":"2026-02-21T18:53:36.444276","risk_type":"HIGH","script":"Nne/Nna, Sabi Health dey call you for Lagos. Risk don high for there. Abeg stay safe!","response":null}]
[0;32m‚úÖ Logs retrieved[0m
[0;32m‚úÖ All tests completed successfully![0m
